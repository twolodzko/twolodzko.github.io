<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2021-02-26">

<title>Timothy Wolodzko - Bash pocket guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-V9DH8RH1V5"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
 
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied'
  });
gtag('config', 'G-V9DH8RH1V5', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Timothy Wolodzko</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Bash pocket guide</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">blog</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 26, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Bash is like regular expressions: everyone uses it, but nobody knows it well. Every time I need to write Bash, I find myself googling a lot. The main purpose for writing this guide is to gather in a single place the things I google most often.</p>
<p>People usually don’t like Bash. I agree, it is not pretty and has many strange quirks. But Bash is useful if you are running a Unix machine (Docker anyone?). While in most cases you could replace Bash with your favorite programming language, using a few lines of Bash could lead to a much simpler code. For me, Bash is useful for automating repeated tasks like “download this, do something to those files, call this script, …”. Bash would be almost always available on the machine, so it is portable (no problems with dependencies!). It is also simple enough that others would easily understand what your code is doing. Bash is a tool for those fast-and-dirty tasks we often need to do on day to day basis.</p>
<p>If you are looking for more references on Bash, I recommend the <a href="https://www.oreilly.com/library/view/bash-pocket-reference/9781449388669/"><em>Bash Pocket Reference</em></a> book by Arnold Robbins and the <a href="https://wizardzines.com/zines/bite-size-bash/"><em>Bite Size Bash</em></a> cheatsheet from the <a href="https://wizardzines.com/comics/">⭐ wizard zines ⭐</a> series by Julia Evans (<a href="https://twitter.com/b0rk"><span class="citation" data-cites="b0rk">@b0rk</span></a>). If you need more advanced features than described below, then maybe you need some other tool than Bash for solving your problem?</p>
<section id="what-is-binsh" class="level2">
<h2 class="anchored" data-anchor-id="what-is-binsh">What is <code>/bin/sh</code>?</h2>
<p>People often wonder if <code>/bin/sh</code> and <code>/bin/bash</code> is the same and <a href="https://stackoverflow.com/questions/5725296/difference-between-sh-and-bash">the answer is <em>no</em></a>. <code>/bin/sh</code> is just a symbolic link to <code>Bash</code>, <code>Dash</code>, etc. To check what is your default shell use <code>echo "$SHELL"</code>. To change your default shell, use the <a href="https://www.tecmint.com/change-a-users-default-shell-in-linux/"><code>chsh</code> utility</a>. Because the shells may differ in details of the implementation, make sure to start bash scripts with the <a href="https://github.com/koalaman/shellcheck/wiki/SC2148">shebang</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Bash <a href="https://stackoverflow.com/questions/4814006/can-i-assume-bash-is-installed">should, but does not need to</a>, be installed on all machines, so this is a safe choice. If unsure, use <code>#!/bin/sh</code>, but in such case, you need to remember that the shell you’ll be using would not guarantee to provide all the functionalities of Bash, only the basic ones defined by <a href="https://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html">POSIX</a> standard.</p>
</section>
<section id="hello-world" class="level2">
<h2 class="anchored" data-anchor-id="hello-world">Hello World!</h2>
<p>To print, you can use either <code>echo</code>, or <code>printf</code> (formatted).</p>
<pre class="shell"><code>$ echo "Hello World!"
Hello World!
$ printf "%.2f\n" 1.12345
1.12
$ printf "%s went to the %s and bought a %s\n" Jack shop lollypop
Jack went to the shop and bought a lollypop</code></pre>
<p>In Bash, you <a href="https://unix.stackexchange.com/questions/68694/when-is-double-quoting-necessary">don’t really</a> need to quote the printed strings, but it is generally considered a good practice. Quotes improve readability, make the code more foolproof, and might be needed if the script will be evaluated using shells other than Bash. If you would use <code>shellcheck</code> for validating the script, it will always complain about variables that are not quoted, since it <a href="https://github.com/koalaman/shellcheck/wiki/SC2086">may lead to problems</a>. When quoting strings, double quotes <code>"</code> will evaluate the variables, while single quotes, will take the string as-is.</p>
<pre class="shell"><code>$ echo "$PWD"
/my/current/path
$ echo '$PWD'
$PWD</code></pre>
</section>
<section id="variables" class="level2">
<h2 class="anchored" data-anchor-id="variables">Variables</h2>
<p>To assign a local variable, use <code>=</code> without any spaces before or after it. The variables can be accessed by prefixing their name with <code>$</code>.</p>
<pre class="shell"><code>$ x = 2
x: command not found
$ x=2
$ x
x: command not found
$ echo "$x"
2</code></pre>
<p>Alternatively, you can use <code>${}</code> to access the variable, it may be <a href="https://stackoverflow.com/questions/8748831/when-do-we-need-curly-braces-around-shell-variables">useful when creating a string using a variable</a></p>
<pre class="shell"><code>$ foobar="hello!"
$ foo="Whiskey "
$ echo "$foobar"
hello!
$ echo "$foo"'bar'
Whiskey bar
$ echo "${foo}bar"
Whiskey bar</code></pre>
<p>The variable can be freed by using <code>unset</code></p>
<pre class="shell"><code>$ x=1
$ echo "x=$x"
x=1
$ unset x
$ echo "x=$x"
x=</code></pre>
<p>You can also define constants, that cannot be deleted, or altered</p>
<pre class="shell"><code>$ readonly PI=3.14
$ echo "$PI"
3.14
$ PI=3
sh: 5: PI: is read only
$ unset PI
sh: 6: unset: PI: is read only</code></pre>
<p>Additionally, you can use <code>export</code> to <a href="https://superuser.com/questions/153371/what-does-export-do-in-bash">make the variable available also to the child processes</a>. There is a nice <a href="https://www.cyberciti.biz/faq/set-environment-variable-linux/">guide on Bash variables</a> that goes into more detail.</p>
</section>
<section id="operations-on-the-variables" class="level2">
<h2 class="anchored" data-anchor-id="operations-on-the-variables">Operations on the variables</h2>
<p>Bash does not check if the variable exists when asking for its value, so <code>echo $xsSXSaa</code> would print an empty string, even if you never defined the <code>xsSXSaa</code> variable. Instead, it has a <a href="https://www.cyberciti.biz/tips/bash-shell-parameter-substitution-2.html">very advanced syntax</a> for interacting with variables. If the variable does not have an assigned value, you can use <code>${variable:-default}</code> to return the <code>default</code> value instead, or <code>${variable:=default}</code> to <em>assign</em> and return the value. In some cases it may be useful to fail with an error message if the variable is not set <code>${variable?message}</code>. Other expressions are summarized in the table below taken from <a href="https://stackoverflow.com/a/16753536/3986320">this StackOverflow answer</a>.</p>
<pre><code>+-----------------+----------------------+-----------------+---------------+
|   Expression    |  FOO="world"         |     FOO=""      |   unset FOO   |
|   in script:    |  (Set and Not Null)  |  (Set But Null) |    (Unset)    |
+-----------------+----------------------+-----------------+---------------+
| ${FOO:-hello}   | world                | hello           | hello         |
| ${FOO-hello}    | world                | ""              | hello         |
| ${FOO:=hello}   | world                | FOO=hello       | FOO=hello     |
| ${FOO=hello}    | world                | ""              | FOO=hello     |
| ${FOO:?hello}   | world                | error, exit     | error, exit   |
| ${FOO?hello}    | world                | ""              | error, exit   |
| ${FOO:+hello}   | hello                | ""              | ""            |
| ${FOO+hello}    | hello                | hello           | ""            |
+-----------------+----------------------+-----------------+---------------+</code></pre>
<p>Additionally, Bash offers syntax for operating strings stored in the variables (everything is a string for Bash):</p>
<ul>
<li>remove pattern from the beginning of the string: <code>${var#pattern}</code>, <code>${var##pattern}</code>,</li>
<li>remove pattern from the back of the string: <code>${var%pattern}</code>, <code>${var%%pattern}</code>,</li>
<li>substitute a pattern: <code>${var/pattern/replacement/}</code>, or all it’s occurrences <code>${var//pattern/replacement/}</code>,</li>
<li>access substring <code>${var:offset}</code>, <code>${var:offset:length}</code></li>
<li>convert first <code>${var^}</code>, or all <code>${var^^}</code> characters to uppercase,</li>
<li>convert first <code>${var,}</code>, or all <code>${var,,}</code> characters to lowercase.</li>
</ul>
</section>
<section id="arrays" class="level2">
<h2 class="anchored" data-anchor-id="arrays">Arrays</h2>
<p>Arrays can be created using round brackets. They are zero-indexed and the elements can be accessed using <code>${}</code>.</p>
<pre class="shell"><code>$ arr=(1 2 3)
$ echo "${arr[0]}"
1
$ echo "${arr[@]}"
1 2 3
$ arr+=(4 5)
$ echo "${arr[@]}"
1 2 3 4 5</code></pre>
<p>You can also iterate over the elements using a <code>for</code> loop.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="va">arr</span><span class="op">=</span><span class="va">(</span>1 2 3<span class="va">)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> <span class="st">"</span><span class="va">${arr</span><span class="op">[@]</span><span class="va">}</span><span class="st">"</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"</span><span class="va">$x</span><span class="st">"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Using curly brackets, you can create sequences <code>${start..end..step}</code>.</p>
<pre class="shell"><code>$ echo {1..5}
1 2 3 4 5
$ echo {5..1..-2}
5 3 1
$ echo {a..z..3}
a d g j m p s v y</code></pre>
<p>When using multiple curly brackets to create a string, it will create <em>all the combinations</em> of the possible strings. This can be used together with other commands, for example, to create or remove multiple files.</p>
<pre class="shell"><code>$ touch file_{1..3}{a..c}.{txt,md}
$ ls file*
file_1a.md   file_1b.md   file_1c.md   file_2a.md   file_2b.md   file_2c.md   file_3a.md   file_3b.md   file_3c.md
file_1a.txt  file_1b.txt  file_1c.txt  file_2a.txt  file_2b.txt  file_2c.txt  file_3a.txt  file_3b.txt  file_3c.txt</code></pre>
</section>
<section id="conditional-statements" class="level2">
<h2 class="anchored" data-anchor-id="conditional-statements">Conditional statements</h2>
<p>In Bash, you can use two different kinds of methods for evaluating logical expressions <code>[</code> and <code>[[</code>. This can be very confusing at first since they can behave differently. <a href="https://stackoverflow.com/a/47576482/3986320">This StackOverflow answer</a> compares those operators, and in <a href="https://unix.stackexchange.com/questions/306111/what-is-the-difference-between-the-bash-operators-vs-vs-vs">this thread</a> that discusses additionally the use of <code>(</code> and <code>((</code>. More details can be found on the man page of the <a href="https://linux.die.net/man/1/test">test</a>. TL;DR you can safely use single <code>[</code>, unless you need some specific functionalities of the extended operator <code>[[</code>.</p>
<p>In Bash <code>&amp;</code> and <code>|</code> are binary AND and OR operators, for logical operators, use instead <code>&amp;&amp;</code>, <code>||</code>, and <code>!</code> for negation.</p>
<p>It is useful to know some basic checks: <code>-z</code> empty string, <code>-n</code> non-empty string, <code>-d</code> directory exists, <code>-f</code> file exists, <code>-s</code> file is non-empty, <code>-x</code> executable file exists. Strings can be compared using the <code>=</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, operators, but beware of using <code>==</code> that <a href="https://kapeli.com/cheat_sheets/Bash_Test_Operators.docset/Contents/Resources/Documents/index">behaves differently</a> when used in <code>[</code> and <code>[[</code>. For comparing numeric values use instead: <code>-eq</code> equal, <code>-ne</code> not equal, <code>-lt</code> lower than, <code>-le</code> less or equal, <code>-gt</code> greater than, <code>-ge</code> greater or equal. Alternatively, the <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code> operators can be used in double round brackets to compare numeric values e.g.&nbsp;<code>(( 2 &lt; 3 ))</code> is equivalent to <code>[ 2 -lt 3 ]</code>.</p>
</section>
<section id="control-flow" class="level2">
<h2 class="anchored" data-anchor-id="control-flow">Control flow</h2>
<p>The control flow commands use their names inverted for closing the blocks, so there is <code>if ... fi</code> and <code>case ... esac</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="ex">cond1</span> <span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">...</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> <span class="ex">cond2</span> <span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">...</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I will use evaluating a basic mathematical expression to illustrate an <code>if</code> statement.</p>
<pre class="shell"><code>$ if [ "$(( 2 + 2 ))" -eq 4 ]; then
&gt;   echo "wow! math works!"
&gt; fi
wow! math works!</code></pre>
<p>For checking multiple conditions, you can use the <code>case ... in</code> syntax.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="st">"</span><span class="va">$variable</span><span class="st">"</span> <span class="kw">in</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="ss">pattern</span><span class="kw">)</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="ex">commands</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">;;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="ss">pattern</span><span class="kw">)</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="ex">commands</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">;;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="pp">*</span><span class="kw">)</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        <span class="ex">commands</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">;;</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="cf">esac</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where the patterns <a href="https://www.thegeekstuff.com/2010/07/bash-case-statement/">can be either</a> exact values that are matched, or wildcards and patterns. Moreover, different patterns can be combined using <code>|</code>. Additionally, there is <a href="https://unix.stackexchange.com/a/75356/91505">a cool trick</a>, that you can use <code>;&amp;</code> as a delimiter to call all the cases following the matched pattern, or <code>;;&amp;</code> to be able to match multiple patterns.</p>
</section>
<section id="for-and-while-loops" class="level2">
<h2 class="anchored" data-anchor-id="for-and-while-loops"><code>for</code> and <code>while</code> loops</h2>
<p>The <code>for</code> loop can either be used to iterate over explicitly listed elements</p>
<pre class="shell"><code>$ for name in "one" "two" "three"; do
&gt;   echo "$name"
&gt; done
one
two
three</code></pre>
<p>or outputs of commands and arrays (see <a href="#Arrays">Arrays</a>)</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> f <span class="kw">in</span> <span class="st">"</span><span class="va">$(</span><span class="fu">ls</span><span class="va">)</span><span class="st">"</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"</span><span class="va">$f</span><span class="st">"</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For iterating until the brake condition is met, use <code>while</code> loop. The popular use case is <a href="https://stackoverflow.com/a/10929511/3986320">iterating over lines of a file</a>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">IFS</span><span class="op">=</span> <span class="bu">read</span> <span class="at">-r</span> <span class="va">line</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"Text read from file: </span><span class="va">$line</span><span class="st">"</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span> <span class="op">&lt;</span> my_filename.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="evaluating-expressions" class="level2">
<h2 class="anchored" data-anchor-id="evaluating-expressions">Evaluating expressions</h2>
<p>To evaluate an expression you can use <code>`...`</code> or <code>$(...)</code>, but using <code>$(...)</code> <a href="https://mywiki.wooledge.org/BashFAQ/082">is recommended</a>. While the quotes in the example below might look awkward, this is a <a href="https://unix.stackexchange.com/questions/118433/quoting-within-command-substitution-in-bash">valid approach in Bash</a>, since variables need to be quoted and the whole the expression also should.</p>
<pre class="shell"><code>cmd='date'
echo "$("$cmd")"
Tue 23 Feb 14:56:12 CET 2021</code></pre>
<p>To evaluate math expressions, use double round brackets.</p>
<pre class="shell"><code>$ echo "$( 2 + 2 )"
2: command not found
$ echo "$(( 2 + 2 ))"
4</code></pre>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<p>Functions in Bash are quite different from what you may know from another programming (scripting?) languages. They don’t include inputs in their definitions, instead, but use positional arguments accessed by <code>$1</code>, <code>$2</code>, … , <code>${10}</code>, … etc. <code>$0</code> is reserved for the <a href="https://bash.cyberciti.biz/guide/$0">name of the shell, or the shell script that contains the code</a>.</p>
<pre class="shell"><code>$ hello() {
&gt;   echo "Hello $1!"
&gt; }
$ hello "Tim"
Hello Tim!</code></pre>
<p>To access all elements, you can use <code>$@</code>.</p>
<pre class="shell"><code>$ first() { echo "$1"; }
$ first 1 2 3
1
$ all() { echo "$@"; }
$ all 1 2 3
1 2 3
$ tail() { shift; echo "$@"; }
$ tail 1 2 3
2 3</code></pre>
<p>and <code>$#</code> holds the number of the arguments that were passed to the function.</p>
<pre class="shell"><code>$ count () { echo "$#"; }
$ count a b c
3</code></pre>
<p>Remember to use the semicolon <code>;</code> when writing multiple commands in a single line, this also applies to <code>if ...; then</code>, <code>for ...; do</code>, and if closing the curly braces in the same line <code>...; }</code>.</p>
<p>Functions can also use <code>read</code> command to access files, or <a href="https://stackoverflow.com/questions/18544359/how-to-read-user-input-into-a-variable-in-bash">collect input from the user</a>.</p>
<p>Functions in Bash do not return anything but the <a href="https://en.wikipedia.org/wiki/Exit_status">exit status</a>. To provide an exit code using <code>exit 0</code> for success, or any non-zero status, like <code>exit 1</code> for error. The exit status of the most recently executed command is available through the <code>$?</code> variable. To communicate with the outside world, they use side effects like printing to <a href="https://www.howtogeek.com/435903/what-are-stdin-stdout-and-stderr-on-linux/">stdout</a>, or saving files.</p>
</section>
<section id="scripts" class="level2">
<h2 class="anchored" data-anchor-id="scripts">Scripts</h2>
<p>Bash code often comes not as functions, but as scripts. The scripts behave like functions, so if you create the <code>hello.sh</code> script, you can call it by invoking its name <code>./hello.sh</code>, you can also provide positional arguments like <code>./hello.sh -h</code>. When the function is saved in a directory that was <a href="https://linuxize.com/post/how-to-add-directory-to-path-in-linux/">added to the <code>$PATH</code></a>, for example, <code>/usr/bin/</code>, you can call it by just invoking its filename. An example of a trivial script is given below.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">[[</span> <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="ot">==</span> <span class="st">"-h"</span> <span class="kw">||</span> <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="ot">==</span> <span class="st">"--help"</span> <span class="kw">]];</span> <span class="cf">then</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"Usage: </span><span class="va">$(</span><span class="fu">basename</span> <span class="st">"</span><span class="va">$0</span><span class="st">"</span><span class="va">)</span><span class="st"> [-h|--help|name]"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"Print 'Hello World!' or 'Hello [name]!' if name is provided."</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"options:"</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"-h or --help    Print this Help."</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">exit</span> 0</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">-n</span> <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="va">name</span><span class="op">=</span><span class="st">"</span><span class="va">$1</span><span class="st">"</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"Hello </span><span class="va">$name</span><span class="st">!"</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"Hello World!"</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As you can see, since Bash only has positional arguments, flags like <code>-h</code> are just strings passed as arguments. For simple scripts a bunch of <code>if'</code>s would be enough, but otherwise you might need to use <code>case ... in</code>, combined with <code>shift</code> as described in the answers in <a href="https://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash">this thread</a>. But, if it gets that complicated, I usually drop Bash and switch to using a language that has more advanced ways of parsing the arguments.</p>
<p>The help gets printed when using the <code>-h</code> or <code>--help</code> flag and then the scripts exits with status <code>0</code> (success). There is no standard format for the documentation, though there is a <a href="https://stackoverflow.com/questions/9725675/is-there-a-standard-format-for-command-line-shell-help-text">popular convention</a> that optional arguments are described in square brackets and alternatives are separated with <code>|</code>.</p>
<p>If you save the script to the <code>hello.sh</code> file, next, you can validate it with <code>shellcheck</code>, make it executable, and run it.</p>
<pre class="shell"><code>$ shellcheck hello.sh
$ chmod +x hello.sh
$ ./hello.sh -h
Usage: hello.sh [name]

Print 'Hello World!' or 'Hello [name]!' if name is provided.
$ ./hello.sh
Hello World!
$ ./hello.sh Tim
Hello Tim!</code></pre>
</section>
<section id="redirecting-output-and-raising-errors" class="level2">
<h2 class="anchored" data-anchor-id="redirecting-output-and-raising-errors">Redirecting output and raising errors</h2>
<p>While functions and scripts do not return any values, only the exit statuses, they can print to <a href="https://stackoverflow.com/questions/3385201/confused-about-stdin-stdout-and-stderr">two channels <em>stdout</em> and <em>stderr</em></a>. The first one is used for regular printing, you see it in the console. The second one is <em>standard error</em>, we use it for throwing errors.</p>
<p>You can <a href="https://www.gnu.org/software/bash/manual/html_node/Redirections.html">redirect</a> the output of a command using <code>&gt;</code>, or <code>1&gt;</code> for example, <code>ls &gt; files.txt</code> will redirect the output of the <code>ls</code> function to the <code>files.txt</code> file. When redirecting to a file, <code>&gt;</code> will overwrite the target file, to append it use <code>&gt;&gt;</code> instead. Use <code>2&gt;</code> if you want to redirect <em>stderr</em>. You can use two redirects <code>./script.sh 1&gt; output.txt 2&gt; errors.log</code>, or use <code>&amp;&gt;</code> to redirect both to the same target. If you want to suppress the output, just redirect it to <code>/dev/null</code>, for example,</p>
<pre class="shell"><code>$ find / -name "foo" 2&gt; /dev/null</code></pre>
<p>will suppress all the “Permission denied” errors. To redirect the <em>stdout</em> to both the console and a file, use the <a href="https://linuxize.com/post/linux-tee-command/"><code>tee</code> command</a>.</p>
<p>In some cases, you may want to <a href="https://stackoverflow.com/questions/818255/in-the-shell-what-does-21-mean">redirect <em>stderr</em> to <em>stdout</em></a>, this can be done using <code>2&gt;&amp;1</code>, or the other way around <code>1&gt;&amp;2</code>. This can be used to <a href="https://stackoverflow.com/questions/30078281/raise-error-in-a-bash-script">raise an error</a>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Error!"</span> <span class="dv">1</span><span class="op">&gt;&amp;</span><span class="dv">2</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="bu">exit</span> 64</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Another useful redirect method are the <a href="https://linux.die.net/abs-guide/x15683.html">here strings</a> <code>&lt;&lt;&lt;</code>, that pass a string to a command as if it was a file.</p>
<pre class="shell"><code>$ wc -l "$(printf "first\nsecond\nthird\n")"
wc: 'first'$'\n''second'$'\n''third': No such file or directory
$ wc -l &lt;&lt;&lt; "$(printf "first\nsecond\nthird\n")"
3</code></pre>
</section>
<section id="chaining-and-piping" class="level2">
<h2 class="anchored" data-anchor-id="chaining-and-piping">Chaining and piping</h2>
<p>Multiple commands can be written in a single line when we combine them with <code>&amp;&amp;</code>, for example, <code>sudo apt update &amp;&amp; sudo apt upgrade</code>. In such a case, they will be invoked sequentially, and the chain will stop in case one of them throws an error.</p>
<p>You can also pipe the output of one command as an input to another command. For example, <code>ls | grep "foo"</code> will redirect the list of files returned by <code>ls</code> and use <code>grep</code> to filter out all the names containing the “foo” phrase. For piping to <code>sudo</code>, you need to use the <a href="https://linuxize.com/post/linux-tee-command/"><code>tee</code> command</a>.</p>
<p>To give a <a href="https://stackoverflow.com/questions/1358540/how-can-i-count-all-the-lines-of-code-in-a-directory-recursively">more advanced example</a> of piping, we can use <code>find</code> to list all the Python files, use <code>xargs</code> to pass those file names to <code>cat</code> to print their contents, and use <code>wc -l</code> to count all the lines.</p>
<pre class="shell"><code>$ ( find ./ -name '*.py' -print0 | xargs -0 cat ) | wc -l</code></pre>
</section>
<section id="parallel-processes" class="level2">
<h2 class="anchored" data-anchor-id="parallel-processes">Parallel processes</h2>
<p>To start two simultaneous processes, just combine them with <code>&amp;</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">command1</span> <span class="kw">&amp;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="ex">command2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can <a href="https://stackoverflow.com/a/5238146/3986320">initialize multiple processes from a <code>for</code> loop</a>.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Spawning 100 processes"</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">100</span><span class="dt">}</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">(</span> <span class="ex">./my_script</span> <span class="kw">&amp;</span> <span class="kw">)</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="kw">;</span> <span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To display a list of active jobs use the <code>jobs</code> command. <code>fg [job_spec]</code> moves the job to the foreground, Ctrl+Z or <code>bg [job_spec]</code> to the background, <code>disown [job_spec]</code> terminates it. To prevent the processes from dying with the shell being closed, you can use the “no hangup” <code>nohup</code> command.</p>
<p>Those commands are build-in and do not have <code>man</code> pages, so use <code>fg --help</code> or <code>help fg</code> for details. To list all the built-in commands use <code>help</code> alone.</p>
</section>
<section id="debugging-and-testing" class="level2">
<h2 class="anchored" data-anchor-id="debugging-and-testing">Debugging and testing</h2>
<p>To run a Bash script in <a href="https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_02_03.html">debug mode</a> use <code>bash -x script.sh</code>. The debug mode can also be activated for chosen lines in a script by encapsulating them in <code>set -x</code> and <code>set +x</code></p>
<p>Bash by default does not fail but continues running (to read more on the <code>EOF</code> trick, check <a href="https://stackoverflow.com/questions/2500436/how-does-cat-eof-work-in-bash">this thread</a>).</p>
<pre class="shell"><code>$ cat &lt;&lt; EOF &gt; test.sh
&gt; #!/bin/bash
&gt; foo
&gt; bar
&gt; echo "Done!"
&gt; EOF
$ bash test.sh
./test.sh: line 1: foo: command not found
./test.sh: line 2: bar: command not found
Done!</code></pre>
<p>To turn this behavior off, you <a href="https://twitter.com/b0rk/status/1314345978963648524">can add</a> the following line in the beginning of your script:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> <span class="at">-euo</span> pipefail</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>notice that using it <a href="https://mywiki.wooledge.org/BashPitfalls#set_-euo_pipefail">has some pitfalls</a>, so don’t use it blindly.</p>
<p>To discover common bugs and code smells in Bash scripts, you can use the <a href="https://github.com/koalaman/shellcheck">open-source <code>shellcheck</code> tool</a>. It conducts a static analysis of the script and provides many helpful hints for solving the issues.</p>
<p>If you want to add unit tests to your code, there is a <a href="https://torokmark.github.io/assert.sh/">useful <code>assert.sh</code> script</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>